@page
@model SegmentUsers.UI.Pages.IndexModel
@{
    ViewData["Title"] = "Пользователи";
}

<h1 class="mb-4">Пользователи и их сегменты</h1>

<div class="mb-4">
    <a asp-page="/CreateUser" class="btn btn-primary me-2">Создать пользователя</a>
    <a asp-page="/CreateSegment" class="btn btn-secondary">Создать сегмент</a>
</div>

@if (Model.Users?.Any() == true)
{
    foreach (var user in Model.Users)
    {
        <div class="card mb-3">
            <div class="card-body">
                <h5 class="card-title">@user.Name @user.LastName</h5>
                <p class="card-text"><strong>Email:</strong> @user.Email</p>

                @if (user.Segments?.Any() == true)
                {
                    <p><strong>Сегменты:</strong></p>
                    <ul class="list-group">
                        @foreach (var segment in user.Segments)
                        {
                            <li class="list-group-item">
                                <a asp-page="/Segment" asp-route-segmentId="@segment.Id">@segment.Name</a>
                            </li>
                        }
                    </ul>
                }
                else
                {
                    <p class="text-muted">Сегменты не назначены.</p>
                }
            </div>
        </div>
    }
}
else
{
    <p>Нет пользователей для отображения.</p>
}